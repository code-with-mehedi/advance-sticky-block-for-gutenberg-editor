{"version":3,"file":"view.js","mappings":"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","sources":["webpack://advance-sticky-block-for-gutenberg-editor/./src/view.js"],"sourcesContent":["//document.addEventListener(\"DOMContentLoaded\", () => {\n//\tconst stickyElements = document.querySelectorAll(\n//\t\t\".wp-block-create-block-advance-sticky-block-for-gutenberg-editor[data-sticky='true']\"\n//\t);\n\t//const parseTopOffset = (value, parentElement) => {\n\t//\tif (!value) return 0; // Default to 0 if no value is provided\n\t//\tif (!parentElement) {\n\t//\t\tconsole.error(\"Parent element is not defined for the sticky element.\");\n\t//\t\treturn 0;\n\t//\t}\n\t//\tif (value.endsWith(\"px\")) {\n\t//\t\treturn parseFloat(value); // Return value in px\n\t//\t} else if (value.endsWith(\"em\")) {\n\t//\t\tconst fontSize = parseFloat(getComputedStyle(parentElement).fontSize);\n\t//\t\treturn parseFloat(value) * fontSize; // Convert em to px\n\t//\t} else if (value.endsWith(\"%\")) {\n\t//\t\treturn (parseFloat(value) / 100) * window.innerHeight; // Convert % to px relative to viewport height\n\t//\t} else {\n\t//\t\treturn parseFloat(value); // Assume it's px if no unit is provided\n\t//\t}\n\t//};\n\n//\twindow.addEventListener(\"scroll\", () => {\n//\t\tstickyElements.forEach((stickyElement) => {\n//\t\t\tconst topOffset = stickyElement.getAttribute(\"data-top-offset\") || 0;\n//\t\t\tconst parent = stickyElement.parentElement;\n//\t\t\tconst parentRect = parent.getBoundingClientRect();\n//\t\t\tconst parentTop = window.scrollY + parentRect.top;\n//\t\t\tconst parentBottom = parentTop + parent.offsetHeight;\n//\t\t\tconst stickyHeight = stickyElement.offsetHeight;\n//\t\t\tconst scrollTop = window.scrollY + parseTopOffset(topOffset, parent); // Combined scroll and offset\n\n//\t\t\t// Calculate new position based on scrollTop relative to parent\n//\t\t\tlet newPosition = \"fixed\";\n//\t\t\tif (scrollTop < parentTop) {\n//\t\t\t\tnewPosition = \"relative\";\n//\t\t\t\tstickyElement.style.top = \"0\";\n//\t\t\t} else if (scrollTop + stickyHeight > parentBottom) {\n//\t\t\t\tconst bottomOffset = parentBottom - scrollTop;\n//\t\t\t\tconsole.log(bottomOffset);\n//\t\t\t\tstickyElement.style.top = `${bottomOffset}px`;\n//\t\t\t\t//stickyElement.style.top = `${bottomOffset}px`;\n//\t\t\t} else {\n//\t\t\t\tstickyElement.style.top = \"0\"; // Stick within parent bounds\n//\t\t\t}\n\n//\t\t\t// Apply smooth transition for a nicer effect\n//\t\t\tstickyElement.style.transition = \"transform 0.2s ease-in-out\";\n//\t\t\tstickyElement.style.transform = newPosition === \"fixed\" ? `translateY(${topOffset}px)` : \"none\";\n//\t\t});\n//\t});\n//});\n\n//const stickyElements = document.querySelectorAll(\n//\t\".wp-block-create-block-advance-sticky-block-for-gutenberg-editor[data-sticky='true']\"\n//);\n//const parseTopOffset = (value, parentElement) => {\n//\tif (!value) return 0; // Default to 0 if no value is provided\n//\tif (!parentElement) {\n//\t\tconsole.error(\"Parent element is not defined for the sticky element.\");\n//\t\treturn 0;\n//\t}\n//\tif (value.endsWith(\"px\")) {\n//\t\treturn parseFloat(value); // Return value in px\n//\t} else if (value.endsWith(\"em\")) {\n//\t\tconst fontSize = parseFloat(getComputedStyle(parentElement).fontSize);\n//\t\treturn parseFloat(value) * fontSize; // Convert em to px\n//\t} else if (value.endsWith(\"%\")) {\n//\t\treturn (parseFloat(value) / 100) * window.innerHeight; // Convert % to px relative to viewport height\n//\t} else {\n//\t\treturn parseFloat(value); // Assume it's px if no unit is provided\n//\t}\n//};\n//window.addEventListener(\"scroll\", () => {\n//\tstickyElements.forEach((stickyElement) => {\n//\t\tconst rect = stickyElement.getBoundingClientRect();\n//\t\tconst topOffset = parseTopOffset(stickyElement.getAttribute(\"data-top-offset\"), stickyElement.parentElement) || 0;\n//\t\tconst sectionTop = rect.top + window.scrollY; // Convert to absolute scroll position\n//\t\tconst sectionBottom = sectionTop + stickyElement.offsetHeight;\n//\t\tconst parentElement = stickyElement.parentElement;\n//\t\tconst parentRect = parentElement.getBoundingClientRect();\n//\t\tconst parentTop = parentRect.top + window.scrollY;\n//\t\tconst parentBottom = parentTop + parentElement.offsetHeight;\n//\t\tconst stickyHeight = stickyElement.offsetHeight;\n\n//\t\tconst scrollTop = window.scrollY;\n\n//\t\t// Apply the logic for sticky behavior\n//\t\tif (scrollTop + topOffset >= sectionTop && scrollTop + topOffset + stickyHeight < parentBottom) {\n//\t\t\tconsole.log(topOffset);\n//\t\t\tstickyElement.style.position = 'fixed';\n//\t\t\tstickyElement.style.top = topOffset + 'px';\n//\t\t\tstickyElement.style.width = `${parentElement.offsetWidth}px`; // Ensure the width matches the parent\n//\t\t} else if (scrollTop + topOffset + stickyHeight >= parentBottom) {\n//\t\t\tstickyElement.style.position = 'absolute';\n//\t\t\t//stickyElement.style.top = `${parentElement.offsetHeight - stickyHeight}px`; // Align with the bottom of the parent\n//\t\t} else {\n//\t\t\tstickyElement.style.position = 'relative';\n//\t\t\tstickyElement.style.top = '0';\n//\t\t\tstickyElement.style.width = ''; // Reset width when not sticky\n//\t\t}\n//\t});\n//});\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tconst stickyElements = document.querySelectorAll('.wp-block-create-block-advance-sticky-block-for-gutenberg-editor[data-sticky=\"true\"]');\n\n\tstickyElements.forEach(stickyElement => {\n\t\tlet isStuck = false;\n\t\tlet originalTop = null;\n\n\t\twindow.addEventListener('scroll', () => {\n\t\t\tconst topOffsetStr = stickyElement.getAttribute('data-top-offset') || '0px'; // Default to 0px\n\t\t\tlet topOffset = 0;\n\n\t\t\t// Parse the top offset value\n\t\t\tif (topOffsetStr.endsWith('px')) {\n\t\t\t\ttopOffset = parseFloat(topOffsetStr);\n\t\t\t} else if (topOffsetStr.endsWith('em')) {\n\t\t\t\ttopOffset = parseFloat(topOffsetStr) * parseFloat(getComputedStyle(document.documentElement).fontSize);\n\t\t\t} else if (topOffsetStr.endsWith('%')) {\n\t\t\t\tconst parent = stickyElement.parentNode;\n\t\t\t\tif (!parent) return;\n\t\t\t\tconst parentHeight = parent.offsetHeight;\n\t\t\t\ttopOffset = (parseFloat(topOffsetStr) / 100) * parentHeight;\n\t\t\t} else {\n\t\t\t\ttopOffset = parseFloat(topOffsetStr); // Assume px if no unit\n\t\t\t}\n\n\t\t\tconst parent = stickyElement.parentNode;\n\t\t\tif (!parent) return;\n\n\t\t\tconst parentRect = parent.getBoundingClientRect();\n\t\t\tconst parentTop = window.scrollY + parentRect.top;\n\t\t\tconst parentBottom = parentTop + parentRect.height;\n\t\t\tconst stickyHeight = stickyElement.offsetHeight;\n\t\t\tconst scrollTop = window.scrollY;\n\n\t\t\tif (originalTop === null) {\n\t\t\t\toriginalTop = stickyElement.offsetTop;\n\t\t\t}\n\n\t\t\tif (scrollTop + topOffset > parentTop && scrollTop + topOffset + stickyHeight < parentBottom) {\n\t\t\t\tif (!isStuck) {\n\t\t\t\t\tstickyElement.style.position = 'fixed';\n\t\t\t\t\tstickyElement.style.top = topOffset + 'px';\n\t\t\t\t\tstickyElement.style.width = parentRect.width + 'px';\n\t\t\t\t\tstickyElement.style.left = parentRect.left + 'px';\n\t\t\t\t\tstickyElement.style.marginTop = '0px';\n\t\t\t\t\tisStuck = true;\n\t\t\t\t}\n\t\t\t} else if (scrollTop + topOffset <= parentTop && isStuck) {\n\t\t\t\tstickyElement.style.position = 'relative';\n\t\t\t\tstickyElement.style.top = originalTop + 'px';\n\t\t\t\tstickyElement.style.width = 'auto';\n\t\t\t\tstickyElement.style.left = 'auto';\n\t\t\t\tstickyElement.style.marginTop = '0px';\n\t\t\t\tisStuck = false;\n\t\t\t} else if (scrollTop + topOffset + stickyHeight >= parentBottom && isStuck) {\n\t\t\t\tstickyElement.style.position = 'absolute';\n\t\t\t\tstickyElement.style.top = (parentRect.height - stickyHeight) + 'px';\n\t\t\t\tstickyElement.style.width = parentRect.width + 'px';\n\t\t\t\tstickyElement.style.left = '0';\n\t\t\t\tstickyElement.style.marginTop = '0px';\n\t\t\t\tisStuck = false;\n\t\t\t}\n\t\t});\n\t});\n});\n"],"names":["document","addEventListener","stickyElements","querySelectorAll","forEach","stickyElement","isStuck","originalTop","window","topOffsetStr","getAttribute","topOffset","endsWith","parseFloat","getComputedStyle","documentElement","fontSize","parent","parentNode","parentHeight","offsetHeight","parentRect","getBoundingClientRect","parentTop","scrollY","top","parentBottom","height","stickyHeight","scrollTop","offsetTop","style","position","width","left","marginTop"],"sourceRoot":""}