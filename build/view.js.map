{"version":3,"file":"view.js","mappings":"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","sources":["webpack://advance-sticky-block-for-gutenberg-editor/./src/view.js"],"sourcesContent":["//document.addEventListener(\"DOMContentLoaded\", () => {\n//\tconst stickyElements = document.querySelectorAll(\n//\t\t\".wp-block-create-block-advance-sticky-block-for-gutenberg-editor[data-sticky='true']\"\n//\t);\n\t//const parseTopOffset = (value, parentElement) => {\n\t//\tif (!value) return 0; // Default to 0 if no value is provided\n\t//\tif (!parentElement) {\n\t//\t\tconsole.error(\"Parent element is not defined for the sticky element.\");\n\t//\t\treturn 0;\n\t//\t}\n\t//\tif (value.endsWith(\"px\")) {\n\t//\t\treturn parseFloat(value); // Return value in px\n\t//\t} else if (value.endsWith(\"em\")) {\n\t//\t\tconst fontSize = parseFloat(getComputedStyle(parentElement).fontSize);\n\t//\t\treturn parseFloat(value) * fontSize; // Convert em to px\n\t//\t} else if (value.endsWith(\"%\")) {\n\t//\t\treturn (parseFloat(value) / 100) * window.innerHeight; // Convert % to px relative to viewport height\n\t//\t} else {\n\t//\t\treturn parseFloat(value); // Assume it's px if no unit is provided\n\t//\t}\n\t//};\n\n//\twindow.addEventListener(\"scroll\", () => {\n//\t\tstickyElements.forEach((stickyElement) => {\n//\t\t\tconst topOffset = stickyElement.getAttribute(\"data-top-offset\") || 0;\n//\t\t\tconst parent = stickyElement.parentElement;\n//\t\t\tconst parentRect = parent.getBoundingClientRect();\n//\t\t\tconst parentTop = window.scrollY + parentRect.top;\n//\t\t\tconst parentBottom = parentTop + parent.offsetHeight;\n//\t\t\tconst stickyHeight = stickyElement.offsetHeight;\n//\t\t\tconst scrollTop = window.scrollY + parseTopOffset(topOffset, parent); // Combined scroll and offset\n\n//\t\t\t// Calculate new position based on scrollTop relative to parent\n//\t\t\tlet newPosition = \"fixed\";\n//\t\t\tif (scrollTop < parentTop) {\n//\t\t\t\tnewPosition = \"relative\";\n//\t\t\t\tstickyElement.style.top = \"0\";\n//\t\t\t} else if (scrollTop + stickyHeight > parentBottom) {\n//\t\t\t\tconst bottomOffset = parentBottom - scrollTop;\n//\t\t\t\tconsole.log(bottomOffset);\n//\t\t\t\tstickyElement.style.top = `${bottomOffset}px`;\n//\t\t\t\t//stickyElement.style.top = `${bottomOffset}px`;\n//\t\t\t} else {\n//\t\t\t\tstickyElement.style.top = \"0\"; // Stick within parent bounds\n//\t\t\t}\n\n//\t\t\t// Apply smooth transition for a nicer effect\n//\t\t\tstickyElement.style.transition = \"transform 0.2s ease-in-out\";\n//\t\t\tstickyElement.style.transform = newPosition === \"fixed\" ? `translateY(${topOffset}px)` : \"none\";\n//\t\t});\n//\t});\n//});\n\nconst stickyElements = document.querySelectorAll(\n\t\".wp-block-create-block-advance-sticky-block-for-gutenberg-editor[data-sticky='true']\"\n);\nconst parseTopOffset = (value, parentElement) => {\n\tif (!value) return 0; // Default to 0 if no value is provided\n\tif (!parentElement) {\n\t\tconsole.error(\"Parent element is not defined for the sticky element.\");\n\t\treturn 0;\n\t}\n\tif (value.endsWith(\"px\")) {\n\t\treturn parseFloat(value); // Return value in px\n\t} else if (value.endsWith(\"em\")) {\n\t\tconst fontSize = parseFloat(getComputedStyle(parentElement).fontSize);\n\t\treturn parseFloat(value) * fontSize; // Convert em to px\n\t} else if (value.endsWith(\"%\")) {\n\t\treturn (parseFloat(value) / 100) * window.innerHeight; // Convert % to px relative to viewport height\n\t} else {\n\t\treturn parseFloat(value); // Assume it's px if no unit is provided\n\t}\n};\nwindow.addEventListener(\"scroll\", () => {\n\tstickyElements.forEach((stickyElement) => {\n\t\tconst rect = stickyElement.getBoundingClientRect();\n\t\tconst topOffset = parseTopOffset(stickyElement.getAttribute(\"data-top-offset\"), stickyElement.parentElement) || 0;\n\t\tconst sectionTop = rect.top + window.scrollY; // Convert to absolute scroll position\n\t\tconst sectionBottom = sectionTop + stickyElement.offsetHeight;\n\t\tconst parentElement = stickyElement.parentElement;\n\t\tconst parentRect = parentElement.getBoundingClientRect();\n\t\tconst parentTop = parentRect.top + window.scrollY;\n\t\tconst parentBottom = parentTop + parentElement.offsetHeight;\n\t\tconst stickyHeight = stickyElement.offsetHeight;\n\n\t\tconst scrollTop = window.scrollY;\n\n\t\t// Apply the logic for sticky behavior\n\t\tif (scrollTop + topOffset >= sectionTop && scrollTop + topOffset + stickyHeight < parentBottom) {\n\t\t\tconsole.log(topOffset);\n\t\t\tstickyElement.style.position = 'fixed';\n\t\t\tstickyElement.style.top = topOffset + 'px';\n\t\t\tstickyElement.style.width = `${parentElement.offsetWidth}px`; // Ensure the width matches the parent\n\t\t} else if (scrollTop + topOffset + stickyHeight >= parentBottom) {\n\t\t\tstickyElement.style.position = 'absolute';\n\t\t\t//stickyElement.style.top = `${parentElement.offsetHeight - stickyHeight}px`; // Align with the bottom of the parent\n\t\t} else {\n\t\t\tstickyElement.style.position = 'relative';\n\t\t\tstickyElement.style.top = '0';\n\t\t\tstickyElement.style.width = ''; // Reset width when not sticky\n\t\t}\n\t});\n});\n\n"],"names":["stickyElements","document","querySelectorAll","parseTopOffset","value","parentElement","console","error","endsWith","parseFloat","fontSize","getComputedStyle","window","innerHeight","addEventListener","forEach","stickyElement","rect","getBoundingClientRect","topOffset","getAttribute","sectionTop","top","scrollY","sectionBottom","offsetHeight","parentRect","parentTop","parentBottom","stickyHeight","scrollTop","log","style","position","width","offsetWidth"],"sourceRoot":""}