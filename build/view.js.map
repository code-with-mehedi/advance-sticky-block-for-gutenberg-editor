{"version":3,"file":"view.js","mappings":"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","sources":["webpack://advance-sticky-block-for-gutenberg-editor/./src/view.js"],"sourcesContent":["//document.addEventListener(\"DOMContentLoaded\", () => {\n//\tconst stickyElements = document.querySelectorAll(\n//\t\t\".wp-block-create-block-advance-sticky-block-for-gutenberg-editor[data-sticky='true']\"\n//\t);\n\t//const parseTopOffset = (value, parentElement) => {\n\t//\tif (!value) return 0; // Default to 0 if no value is provided\n\t//\tif (!parentElement) {\n\t//\t\tconsole.error(\"Parent element is not defined for the sticky element.\");\n\t//\t\treturn 0;\n\t//\t}\n\t//\tif (value.endsWith(\"px\")) {\n\t//\t\treturn parseFloat(value); // Return value in px\n\t//\t} else if (value.endsWith(\"em\")) {\n\t//\t\tconst fontSize = parseFloat(getComputedStyle(parentElement).fontSize);\n\t//\t\treturn parseFloat(value) * fontSize; // Convert em to px\n\t//\t} else if (value.endsWith(\"%\")) {\n\t//\t\treturn (parseFloat(value) / 100) * window.innerHeight; // Convert % to px relative to viewport height\n\t//\t} else {\n\t//\t\treturn parseFloat(value); // Assume it's px if no unit is provided\n\t//\t}\n\t//};\n\n//\twindow.addEventListener(\"scroll\", () => {\n//\t\tstickyElements.forEach((stickyElement) => {\n//\t\t\tconst topOffset = stickyElement.getAttribute(\"data-top-offset\") || 0;\n//\t\t\tconst parent = stickyElement.parentElement;\n//\t\t\tconst parentRect = parent.getBoundingClientRect();\n//\t\t\tconst parentTop = window.scrollY + parentRect.top;\n//\t\t\tconst parentBottom = parentTop + parent.offsetHeight;\n//\t\t\tconst stickyHeight = stickyElement.offsetHeight;\n//\t\t\tconst scrollTop = window.scrollY + parseTopOffset(topOffset, parent); // Combined scroll and offset\n\n//\t\t\t// Calculate new position based on scrollTop relative to parent\n//\t\t\tlet newPosition = \"fixed\";\n//\t\t\tif (scrollTop < parentTop) {\n//\t\t\t\tnewPosition = \"relative\";\n//\t\t\t\tstickyElement.style.top = \"0\";\n//\t\t\t} else if (scrollTop + stickyHeight > parentBottom) {\n//\t\t\t\tconst bottomOffset = parentBottom - scrollTop;\n//\t\t\t\tconsole.log(bottomOffset);\n//\t\t\t\tstickyElement.style.top = `${bottomOffset}px`;\n//\t\t\t\t//stickyElement.style.top = `${bottomOffset}px`;\n//\t\t\t} else {\n//\t\t\t\tstickyElement.style.top = \"0\"; // Stick within parent bounds\n//\t\t\t}\n\n//\t\t\t// Apply smooth transition for a nicer effect\n//\t\t\tstickyElement.style.transition = \"transform 0.2s ease-in-out\";\n//\t\t\tstickyElement.style.transform = newPosition === \"fixed\" ? `translateY(${topOffset}px)` : \"none\";\n//\t\t});\n//\t});\n//});\n\nconst stickyElements = document.querySelectorAll(\n\t\".wp-block-create-block-advance-sticky-block-for-gutenberg-editor[data-sticky='true']\"\n);\nconst parseTopOffset = (value, parentElement) => {\n\tif (!value) return 0; // Default to 0 if no value is provided\n\tif (!parentElement) {\n\t\tconsole.error(\"Parent element is not defined for the sticky element.\");\n\t\treturn 0;\n\t}\n\tif (value.endsWith(\"px\")) {\n\t\treturn parseFloat(value); // Return value in px\n\t} else if (value.endsWith(\"em\")) {\n\t\tconst fontSize = parseFloat(getComputedStyle(parentElement).fontSize);\n\t\treturn parseFloat(value) * fontSize; // Convert em to px\n\t} else if (value.endsWith(\"%\")) {\n\t\treturn (parseFloat(value) / 100) * window.innerHeight; // Convert % to px relative to viewport height\n\t} else {\n\t\treturn parseFloat(value); // Assume it's px if no unit is provided\n\t}\n};\nwindow.addEventListener(\"scroll\", () => {\n\tstickyElements.forEach((stickyElement) => {\n\t\t// Get the offset and dimensions of the sticky element\n\t\tconst rect = stickyElement.getBoundingClientRect();\n\t\tconst topOffset = parseTopOffset(stickyElement.getAttribute(\"data-top-offset\"), stickyElement.parentElement) || 0;\n\t\tconst sectionTop = rect.top + window.scrollY; // Convert to absolute scroll position\n\t\tconst sectionBottom = sectionTop + stickyElement.offsetHeight;\n\t\tconst parentHeight = stickyElement.parentElement.offsetHeight;\n\t\tconst parentTop = stickyElement.parentElement.getBoundingClientRect().top + window.scrollY;\n\n\t\t// Check if the current scroll position is within the sticky range\n\t\tif (window.scrollY + topOffset >= sectionTop && window.scrollY + topOffset < sectionBottom) {\n\t\t\tstickyElement.classList.add(\"sticky\");\n\t\t\tstickyElement.style.position = \"fixed\";\n\t\t\tstickyElement.style.top = `${topOffset}px`;\n\t\t\tstickyElement.style.width = `${stickyElement.parentElement.offsetWidth}px`;\n\t\t} else if (window.scrollY >= parentTop + parentHeight) {\n\t\t\t// When scroll position exceeds the parent element's height, remove sticky\n\t\t\tstickyElement.classList.remove(\"sticky\");\n\t\t\tstickyElement.style.position = \"relative\";\n\t\t\tstickyElement.style.top = \"0\";\n\t\t\tstickyElement.style.width = \"\"; // Reset the width\n\t\t}\n\t});\n});\n\n"],"names":["stickyElements","document","querySelectorAll","parseTopOffset","value","parentElement","console","error","endsWith","parseFloat","fontSize","getComputedStyle","window","innerHeight","addEventListener","forEach","stickyElement","rect","getBoundingClientRect","topOffset","getAttribute","sectionTop","top","scrollY","sectionBottom","offsetHeight","parentHeight","parentTop","classList","add","style","position","width","offsetWidth","remove"],"sourceRoot":""}